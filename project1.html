<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة المكتبة الذكية</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: #1e3c72;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-btn {
            background: none;
            border: 2px solid #1e3c72;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            color: #1e3c72;
            transition: all 0.3s;
            font-weight: bold;
        }

        .nav-btn:hover, .nav-btn.active {
            background: #1e3c72;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 3em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-info h3 {
            font-size: 2em;
            color: #333;
        }

        .stat-info p {
            color: #666;
            margin-top: 5px;
        }

        .main-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .main-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .search-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-select {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 1em;
            cursor: pointer;
            background: white;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: transform 0.3s;
        }

        .btn-primary:hover {
            transform: scale(1.05);
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .book-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .book-cover {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            margin-bottom: 15px;
        }

        .book-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .book-info {
            color: #666;
            margin: 5px 0;
            font-size: 0.95em;
        }

        .book-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-top: 10px;
        }

        .available {
            background: #d4edda;
            color: #155724;
        }

        .borrowed {
            background: #fff3cd;
            color: #856404;
        }

        .book-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-small {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-borrow {
            background: #28a745;
            color: white;
        }

        .btn-borrow:hover {
            background: #218838;
        }

        .btn-return {
            background: #ffc107;
            color: #333;
        }

        .btn-return:hover {
            background: #e0a800;
        }

        .borrowed-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .borrowed-item {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            padding: 20px;
            border-radius: 10px;
            border-right: 5px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .borrowed-info h3 {
            color: #333;
            margin-bottom: 8px;
        }

        .borrowed-info p {
            color: #666;
            font-size: 0.9em;
        }

        .due-date {
            background: #fff3cd;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #856404;
        }

        .overdue {
            background: #f8d7da;
            color: #721c24;
        }

        .notification-badge {
            position: relative;
        }

        .badge {
            position: absolute;
            top: -8px;
            left: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: bold;
        }

        .notifications-panel {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            border-right: 4px solid #667eea;
        }

        .notification-item.warning {
            border-right-color: #ffc107;
            background: #fff9e6;
        }

        .notification-item.urgent {
            border-right-color: #dc3545;
            background: #ffe6e6;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }

        .modal-content h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 30px;
        }

        .btn-cancel {
            flex: 1;
            padding: 12px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">📚 نظام المكتبة الذكية</div>
        <div class="nav-links">
            <button class="nav-btn active" onclick="showSection('browse')">تصفح الكتب</button>
            <button class="nav-btn" onclick="showSection('borrowed')">
                <span class="notification-badge">
                    استعاراتي
                    <span class="badge" id="borrowedCount">0</span>
                </span>
            </button>
            <button class="nav-btn" onclick="showSection('notifications')">
                <span class="notification-badge">
                    الإشعارات
                    <span class="badge" id="notifCount">3</span>
                </span>
            </button>
            <button class="btn-primary" onclick="openAddBookModal()">➕ إضافة كتاب</button>
        </div>
    </div>

    <div class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">📖</div>
                <div class="stat-info">
                    <h3 id="totalBooks">247</h3>
                    <p>إجمالي الكتب</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">✅</div>
                <div class="stat-info">
                    <h3 id="availableBooks">189</h3>
                    <p>كتب متاحة</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">📚</div>
                <div class="stat-info">
                    <h3 id="borrowedBooks">58</h3>
                    <p>كتب مستعارة</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">👥</div>
                <div class="stat-info">
                    <h3>412</h3>
                    <p>مستخدم نشط</p>
                </div>
            </div>
        </div>

        <div class="main-section active" id="browseSection">
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="🔍 ابحث عن كتاب، مؤلف، أو رقم ISBN...">
                <select class="filter-select" id="categoryFilter">
                    <option value="all">جميع الفئات</option>
                    <option value="science">علوم</option>
                    <option value="literature">أدب</option>
                    <option value="history">تاريخ</option>
                    <option value="tech">تقنية</option>
                    <option value="religion">دين</option>
                </select>
                <select class="filter-select" id="statusFilter">
                    <option value="all">جميع الحالات</option>
                    <option value="available">متاح</option>
                    <option value="borrowed">مستعار</option>
                </select>
            </div>
            <div class="books-grid" id="booksGrid"></div>
        </div>

        <div class="main-section" id="borrowedSection">
            <h2 style="margin-bottom: 20px; color: #333;">📚 كتبي المستعارة</h2>
            <div class="borrowed-list" id="borrowedList"></div>
        </div>

        <div class="main-section" id="notificationsSection">
            <h2 style="margin-bottom: 20px; color: #333;">🔔 الإشعارات</h2>
            <div class="notifications-panel" id="notificationsList"></div>
        </div>
    </div>

    <div class="modal" id="addBookModal">
        <div class="modal-content">
            <h2>➕ إضافة كتاب جديد</h2>
            <div class="form-group">
                <label>عنوان الكتاب</label>
                <input type="text" id="bookTitle" placeholder="أدخل عنوان الكتاب">
            </div>
            <div class="form-group">
                <label>اسم المؤلف</label>
                <input type="text" id="bookAuthor" placeholder="أدخل اسم المؤلف">
            </div>
            <div class="form-group">
                <label>الفئة</label>
                <select id="bookCategory">
                    <option value="science">علوم</option>
                    <option value="literature">أدب</option>
                    <option value="history">تاريخ</option>
                    <option value="tech">تقنية</option>
                    <option value="religion">دين</option>
                </select>
            </div>
            <div class="form-group">
                <label>رقم ISBN</label>
                <input type="text" id="bookISBN" placeholder="978-XXXX-XXXX">
            </div>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeAddBookModal()">إلغاء</button>
                <button class="btn-primary" onclick="addNewBook()">إضافة</button>
            </div>
        </div>
    </div>

    <script>
        let books = [
            {id: 1, title: 'الذكاء الاصطناعي للجميع', author: 'د. محمد أحمد', category: 'tech', isbn: '978-1234-5678', icon: '🤖', status: 'available'},
            {id: 2, title: 'رحلة في عالم الفيزياء', author: 'د. سارة علي', category: 'science', isbn: '978-2345-6789', icon: '⚛️', status: 'available'},
            {id: 3, title: 'قصص من التاريخ الإسلامي', author: 'أحمد حسن', category: 'history', isbn: '978-3456-7890', icon: '📜', status: 'borrowed', dueDate: '2025-11-05'},
            {id: 4, title: 'البرمجة بلغة Python', author: 'عمر خالد', category: 'tech', isbn: '978-4567-8901', icon: '🐍', status: 'available'},
            {id: 5, title: 'روائع الأدب العربي', author: 'فاطمة محمود', category: 'literature', isbn: '978-5678-9012', icon: '📝', status: 'available'},
            {id: 6, title: 'علوم الفضاء والكون', author: 'د. يوسف إبراهيم', category: 'science', isbn: '978-6789-0123', icon: '🚀', status: 'borrowed', dueDate: '2025-11-08'},
            {id: 7, title: 'فن التصميم الرقمي', author: 'ليلى عبدالله', category: 'tech', isbn: '978-7890-1234', icon: '🎨', status: 'available'},
            {id: 8, title: 'الفقه الميسر', author: 'د. أحمد الشيخ', category: 'religion', isbn: '978-8901-2345', icon: '📿', status: 'available'},
        ];

        let myBorrowedBooks = [];
        let notifications = [
            {id: 1, message: 'تذكير: موعد إرجاع كتاب "قصص من التاريخ الإسلامي" بعد 3 أيام', type: 'warning', date: '2025-10-28'},
            {id: 2, message: 'كتب جديدة في قسم التقنية! تحقق من المجموعة الجديدة', type: 'info', date: '2025-10-27'},
            {id: 3, message: 'تأخر في إرجاع كتاب "علوم الفضاء والكون" - يرجى الإرجاع في أقرب وقت', type: 'urgent', date: '2025-10-26'}
        ];

        function showSection(section) {
            document.querySelectorAll('.main-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            if(section === 'browse') {
                document.getElementById('browseSection').classList.add('active');
                event.target.classList.add('active');
            } else if(section === 'borrowed') {
                document.getElementById('borrowedSection').classList.add('active');
                event.target.closest('.nav-btn').classList.add('active');
                displayBorrowedBooks();
            } else if(section === 'notifications') {
                document.getElementById('notificationsSection').classList.add('active');
                event.target.closest('.nav-btn').classList.add('active');
                displayNotifications();
            }
        }

        function displayBooks() {
            const grid = document.getElementById('booksGrid');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            let filteredBooks = books.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) || 
                                     book.author.toLowerCase().includes(searchTerm) ||
                                     book.isbn.includes(searchTerm);
                const matchesCategory = categoryFilter === 'all' || book.category === categoryFilter;
                const matchesStatus = statusFilter === 'all' || book.status === statusFilter;
                return matchesSearch && matchesCategory && matchesStatus;
            });

            grid.innerHTML = filteredBooks.map(book => `
                <div class="book-card">
                    <div class="book-cover">${book.icon}</div>
                    <div class="book-title">${book.title}</div>
                    <div class="book-info">📝 المؤلف: ${book.author}</div>
                    <div class="book-info">🔢 ISBN: ${book.isbn}</div>
                    <span class="book-status ${book.status}">${book.status === 'available' ? 'متاح' : 'مستعار'}</span>
                    <div class="book-actions">
                        ${book.status === 'available' ? 
                            `<button class="btn-small btn-borrow" onclick="borrowBook(${book.id})">استعارة</button>` :
                            `<button class="btn-small btn-return" onclick="returnBook(${book.id})">إرجاع</button>`
                        }
                    </div>
                </div>
            `).join('');

            updateStats();
        }

        function borrowBook(id) {
            const book = books.find(b => b.id === id);
            if(book && book.status === 'available') {
                book.status = 'borrowed';
                const dueDate = new Date();
                dueDate.setDate(dueDate.getDate() + 14);
                book.dueDate = dueDate.toISOString().split('T')[0];
                myBorrowedBooks.push(book);
                displayBooks();
                alert(`تم استعارة كتاب "${book.title}" بنجاح! موعد الإرجاع: ${book.dueDate}`);
            }
        }

        function returnBook(id) {
            const book = books.find(b => b.id === id);
            if(book && book.status === 'borrowed') {
                book.status = 'available';
                book.dueDate = null;
                myBorrowedBooks = myBorrowedBooks.filter(b => b.id !== id);
                displayBooks();
                alert(`تم إرجاع كتاب "${book.title}" بنجاح!`);
            }
        }

        function displayBorrowedBooks() {
            const list = document.getElementById('borrowedList');
            if(myBorrowedBooks.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">لا توجد كتب مستعارة حالياً</p>';
                return;
            }

            list.innerHTML = myBorrowedBooks.map(book => {
                const today = new Date();
                const due = new Date(book.dueDate);
                const isOverdue = due < today;
                
                return `
                    <div class="borrowed-item">
                        <div class="borrowed-info">
                            <h3>${book.icon} ${book.title}</h3>
                            <p>المؤلف: ${book.author}</p>
                            <p>ISBN: ${book.isbn}</p>
                        </div>
                        <div>
                            <div class="due-date ${isOverdue ? 'overdue' : ''}">
                                ${isOverdue ? '⚠️ متأخر' : '📅'} موعد الإرجاع: ${book.dueDate}
                            </div>
                            <button class="btn-small btn-return" style="margin-top: 10px; width: 100%;" onclick="returnBook(${book.id})">إرجاع الآن</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function displayNotifications() {
            const list = document.getElementById('notificationsList');
            list.innerHTML = notifications.map(notif => `
                <div class="notification-item ${notif.type}">
                    <strong>${notif.type === 'urgent' ? '🚨' : notif.type === 'warning' ? '⚠️' : 'ℹ️'} ${notif.message}</strong>
                    <p style="color: #999; margin-top: 5px; font-size: 0.9em;">${notif.date}</p>
                </div>
            `).join('');
        }

        function updateStats() {
            const available = books.filter(b => b.status === 'available').length;
            const borrowed = books.filter(b => b.status === 'borrowed').length;
            document.getElementById('totalBooks').textContent = books.length;
            document.getElementById('availableBooks').textContent = available;
            document.getElementById('borrowedBooks').textContent = borrowed;
            document.getElementById('borrowedCount').textContent = myBorrowedBooks.length;
        }

        function openAddBookModal() {
            document.getElementById('addBookModal').classList.add('active');
        }

        function closeAddBookModal() {
            document.getElementById('addBookModal').classList.remove('active');
        }

        function addNewBook() {
            const title = document.getElementById('bookTitle').value;
            const author = document.getElementById('bookAuthor').value;
            const category = document.getElementById('bookCategory').value;
            const isbn = document.getElementById('bookISBN').value;

            if(title && author && isbn) {
                const icons = {'science': '🔬', 'literature': '📚', 'history': '📜', 'tech': '💻', 'religion': '📿'};
                books.push({
                    id: books.length + 1,
                    title,
                    author,
                    category,
                    isbn,
                    icon: icons[category] || '📖',
                    status: 'available'
                });
                displayBooks();
                closeAddBookModal();
                document.getElementById('bookTitle').value = '';
                document.getElementById('bookAuthor').value = '';
                document.getElementById('bookISBN').value = '';
                alert('تمت إضافة الكتاب بنجاح!');
            } else {
                alert('يرجى ملء جميع الحقول');
            }
        }

        document.getElementById('searchInput').addEventListener('input', displayBooks);
        document.getElementById('categoryFilter').addEventListener('change', displayBooks);
        document.getElementById('statusFilter').addEventListener('change', displayBooks);

        displayBooks();
    </script>
</body>
</html>